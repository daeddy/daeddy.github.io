{"version":3,"file":"main.js","mappings":"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","sources":["webpack://rainbow-particle-breaker/./src/index.ts","webpack://rainbow-particle-breaker/./src/components/Bar.ts","webpack://rainbow-particle-breaker/./src/components/Blocks.ts","webpack://rainbow-particle-breaker/./src/components/Particle.ts","webpack://rainbow-particle-breaker/./src/components/index.ts","webpack://rainbow-particle-breaker/./src/game/GameCanvas.ts","webpack://rainbow-particle-breaker/./src/game/index.ts","webpack://rainbow-particle-breaker/./src/utils/colors.ts","webpack://rainbow-particle-breaker/webpack/bootstrap"],"sourcesContent":["import BlockBreaker from './game';\n\nconst MIN_WIDTH = 700;\nconst MIN_HEIGHT = 600;\n\nwindow.addEventListener(\"load\", (e) => {\n  const canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  const container = document.getElementById(\"container\") as HTMLDivElement;\n  const width = window.innerWidth > MIN_WIDTH ? MIN_WIDTH : window.innerWidth;\n  const height = window.innerWidth > MIN_WIDTH ? MIN_HEIGHT : window.innerHeight * 0.85;\n\n  canvas.width = width;\n  canvas.height = height;\n  const game = new BlockBreaker(container, canvas, 100);\n\n  game.init();\n});","import { RGBColor } from \"utils/colors\";\n\nconst BAR_COLOR: RGBColor = { red: 255, green: 0, blue: 0 };\nclass Bar {\n  x: number = 0;\n  y: number = 0;\n  width: number = 50;\n  height: number = 10;\n  color: RGBColor = BAR_COLOR\n\n  collided(x:number, y:number): boolean {\n    return (\n      x >= this.x && \n      x <= this.x + this.width && \n      y >= this.y && \n      y <= this.y + this.height\n    );\n  }\n\n  constructor(x: number, y: number, width: number, height: number) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n}\n\nexport default Bar;","import Particle from './Particle';\nimport { getRainbowColors } from 'utils/colors';\n\nclass Blocks {\n  private _count: number;\n  private _width: number;\n  private _height: number;\n  \n  count(): number { return this._count; }\n  width(): number { return this._width; }\n  height(): number { return this._height; }\n\n  values: (Particle | undefined)[];\n\n  constructor(width: number, height: number) {\n    this._width = width;\n    this._height = height;\n    this._count = width * height;\n    this.values = new Array(width * height);\n\n    const rainbowColors = getRainbowColors(this._width);\n    for (var i: number = 0; i < this._width; i++) {\n      for (var j: number = 0; j < this._height; j++) {\n        var p: Particle = new Particle(i, j, rainbowColors[i]);\n        this.values[i + j * this._width] = p;\n      }\n    }\n  }\n\n  getParticle(x: number, y: number): Particle | undefined {\n    var index: number = x + y * this._width;\n    if (index >= this.values.length || index < 0) {\n      return undefined;\n    }\n    return this.values[x + y * this._width];\n  }\n\n  removeParticle(x: number, y: number): Particle | undefined {\n    var p: Particle | undefined = this.values[x + y * this._width];\n    if (p) {\n      this._count--;\n      this.values[x + y * this._width] = undefined;\n    }\n    return p;\n  }\n}\n\nexport default Blocks;","import { RGBColor, DEFAULT_COLOR } from \"utils/colors\";\n\nclass Particle {\n  x: number;\n  y: number;\n\n  xSpeed: number = 0;\n  ySpeed: number = 0;\n  color: RGBColor = DEFAULT_COLOR;\n\n  constructor(x: number = 0, y: number = 0, color: RGBColor) {\n    this.x = x;\n    this.y = y;\n    this.color = color;\n  }\n\n  public invertXDirection() {\n    this.xSpeed = -this.xSpeed;\n  }\n  public invertYDirection() {\n    this.ySpeed = -this.ySpeed;\n  }\n  public X(): number {\n    return Math.round(this.x);\n  }\n  public Y(): number {\n    return Math.round(this.y);\n  }\n  public speed(): number {\n    return Math.sqrt(this.xSpeed * this.xSpeed + this.xSpeed * this.xSpeed)\n  }\n  public radian(): number { \n    return Math.atan2(this.ySpeed, this.xSpeed)\n  }\n}\n\nexport default Particle;","import Bar from './Bar';\nimport Blocks from './Blocks';\nimport Particle from './Particle';\n\nexport { Bar, Blocks, Particle };","import { Bar } from \"components\";\nimport { RGBColor } from \"utils/colors\";\n\nexport default class GameCanvas {\n  private _canvas: HTMLCanvasElement;\n  private _canvasCtx: CanvasRenderingContext2D | null;\n  private _imgData!: ImageData;\n  private _pixels!: Uint8ClampedArray;\n  readonly width: number;\n  readonly height: number;\n\n  constructor(canvas: HTMLCanvasElement) {\n    this._canvas = canvas;\n    this._canvasCtx = this._canvas.getContext(\"2d\");\n    this.width = this._canvas.width;\n    this.height = this._canvas.height;\n    this.clear();\n  }\n\n  public renderBar(bar: Bar) {\n    this._canvasCtx.beginPath();\n    this._canvasCtx.fillStyle = `rgb(${bar.color.red},${bar.color.green},${bar.color.blue})`;\n    this._canvasCtx.fillRect(bar.x, bar.y, bar.width, bar.height);\n    this._canvasCtx.stroke();\n  }\n\n  public clear() {\n    this._canvasCtx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n    this._imgData = this._canvasCtx.getImageData(0, 0, this._canvas.width, this._canvas.height);\n    this._pixels = this._imgData.data;\n  }\n\n  public render() {\n    this._canvasCtx.putImageData(this._imgData, 0, 0);\n  }\n\n  public setPixel(x: number, y:number, color: RGBColor): void {\n    var widthBase = this._imgData.width * 4;\n  \n    var index = ((y * widthBase) + (x * 4));\n    this._pixels[index] = color.red; //R\n    this._pixels[index + 1] = color.green; //G\n    this._pixels[index + 2] = color.blue; //B\n    this._pixels[index + 3] = 0xFF; //A\n  }\n\n  public offsetLeft() { return this._canvas.offsetLeft; }\n}","import { Blocks, Particle, Bar } from 'components';\nimport { DEFAULT_COLOR } from 'utils/colors';\nimport GameCanvas from './GameCanvas';\n\nclass BlockBreaker {\n  private _canvas: GameCanvas;\n  private _blocks!: Blocks;\n  private _blocksAreaHeight: number;\n  private _fallBlocks!: Set<Particle>;\n  private _balls!: Set<Particle>;\n  private _bar!: Bar;\n  // fps stuff\n  private _fps: number = 30;\n  private _fpsInterval!: number;\n  private _now!: number;\n  private _then!: number;\n  private _elapsed!: number;\n\n  private _handleWin() {\n    alert(\"Done!\\n\");\n    this.init();\n  }\n\n  private _handleLose() {\n    alert(\"Try again\");\n    this.init();\n  }\n\n  private _drawMovingParticle(particle: Particle, particleSet: Set<Particle>) {\n    // if out of bounds remove\n    if (particle.y > this._canvas.height || particle.y < 0) {\n      particleSet.delete(particle);\n    } \n    // if particle hit the edges (sides) invert x-direction\n    else if ((particle.x < 0 && particle.xSpeed < 0) || (particle.x > this._canvas.width && particle.xSpeed > 0)) {\n      particle.invertXDirection();\n    }\n    // if particle out of bounds (top) invert y-direction\n    else if (particle.y < 0 && particle.ySpeed < 0) {\n      particle.invertYDirection();\n    }\n    // in boundry, draw particle pixel\n    else {\n      this._canvas.setPixel(particle.X(), particle.Y(), particle.color);\n    }\n  }\n\n  private _update() {\n    this._now = Date.now();\n    this._elapsed = this._now - this._then;\n\n    if (this._canvas) {\n      if (this._elapsed > this._fpsInterval) {\n        // Get ready for next frame by setting then=now, but...\n        // Also, adjust for fpsInterval not being multiple of 16.67\n        this._then = this._now - (this._elapsed % this._fpsInterval);\n\n        this._canvas.clear();\n\n        // set block pixels\n        this._blocks.values.forEach(block => {\n          if (block) {\n            this._canvas.setPixel(block.x, block.y, block.color);\n          }\n        });\n\n        // set ball pixels\n        this._balls.forEach(ball => {\n          var bSpeed: number = ball.speed();\n\n          // Render a line of length speed\n          for (var i = 0; i < bSpeed; i++) {\n            ball.x += ball.xSpeed / bSpeed;\n            ball.y += ball.ySpeed / bSpeed;\n\n            var hitParticle: Particle | undefined = this._blocks.getParticle(ball.X(), ball.Y());\n            if (hitParticle) {\n              var removedP: Particle | undefined = this._blocks.removeParticle(ball.X(), ball.Y());\n              if (removedP) {\n                // hit ball moves at an angle from the coliding ball\n                removedP.xSpeed = Math.cos(ball.radian() + Math.PI * 2 / (30 * Math.random()) - 15) * 3;\n                removedP.ySpeed = 1;\n                removedP.color = hitParticle.color;\n                this._fallBlocks.add(removedP);\n              }\n              // colliding ball inverts y-direction\n              ball.invertYDirection();\n            }\n            // if it hit the bar invert direction\n            if (this._bar.collided(ball.x, ball.y)) {\n              ball.ySpeed = -Math.abs(ball.ySpeed);\n            }\n            this._drawMovingParticle(ball, this._balls);\n          }\n        });\n\n        // set falling blocks pixels\n        this._fallBlocks.forEach(fallP => {\n          // if hit a bar remove and converto to new ball\n          if (this._bar.collided(fallP.x, fallP.y)) {\n            var newball: Particle = new Particle(fallP.x, this._canvas.height - this._bar.height + 1, fallP.color);\n            newball.xSpeed = Math.random() * 10;\n            newball.ySpeed = Math.random() * 9 + 1;\n\n            this._balls.add(newball);\n            this._fallBlocks.delete(fallP);\n          } else {\n            fallP.ySpeed += 0.1;\n            fallP.x += fallP.xSpeed;\n            fallP.y += fallP.ySpeed;\n            // Draw pixel\n            this._drawMovingParticle(fallP, this._fallBlocks);\n          }\n        });\n\n        // Draw everything\n        this._canvas.render();\n      }\n\n      if (this._blocks.count() == 0) {\n        this._handleWin();\n      } else if (this._balls.size == 0) {\n        this._handleLose();\n      } else {\n        window.requestAnimationFrame(this._update.bind(this));\n      }\n\n      // bar renders independant of fps constraint\n      this._canvas.renderBar(this._bar);\n    }\n  }\n\n  private _touchmove(evt: any) {\n    this._bar.x = evt.touches[0].clientX - this._canvas.offsetLeft() - (this._bar.width / 2);\n    if (this._bar.x + this._bar.width > this._canvas.width) {\n      this._bar.x = this._canvas.width - this._bar.width;\n    }\n    if (this._bar.x < 0) {\n      this._bar.x = 0;\n    }\n    evt.preventDefault();\n  }\n\n  private _mousemove(evt: any) {\n    this._bar.x = evt.clientX - this._canvas.offsetLeft() - (this._bar.width / 2);\n    if (this._bar.x + this._bar.width > this._canvas.width) {\n      this._bar.x = this._canvas.width - this._bar.width;\n    }\n    if (this._bar.x < 0) {\n      this._bar.x = 0;\n    }\n  }\n\n  public init() {\n    this._blocks = new Blocks(this._canvas.width, this._blocksAreaHeight);\n\n    this._fallBlocks = new Set<Particle>();\n\n    const barHeight = 10;\n    const barY = this._canvas.height - barHeight - 2;\n    this._bar = new Bar(0, barY, 200, barHeight);\n\n    // Start with white ball in the middle\n    var _initialBall: Particle = new Particle(this._canvas.width / 2, this._canvas.height / 2, DEFAULT_COLOR);\n    _initialBall.xSpeed = Math.random() * 10;\n    _initialBall.ySpeed = Math.random() * 9 - 1;\n\n    this._balls = new Set<Particle>();\n    this._balls.add(_initialBall);\n\n    this._fpsInterval = 1000 / this._fps;\n    this._then = Date.now();\n\n    window.requestAnimationFrame(this._update.bind(this));\n  }\n\n  constructor(container: HTMLDivElement, canvas: HTMLCanvasElement, blocksAreaHeight: number) {\n    this._canvas = new GameCanvas(canvas);\n    this._blocksAreaHeight = blocksAreaHeight;\n    // Controll is the entire container area \n    container.addEventListener('mousemove', this._mousemove.bind(this), false);\n    container.addEventListener('touchmove', this._touchmove.bind(this), false);\n  }\n}\n\nexport default BlockBreaker;\n","export type RGBColor = {\n  red: number,\n  green: number,\n  blue: number\n}\n\nexport const DEFAULT_COLOR: RGBColor = { red: 0xFF, green: 0xFF, blue: 0xFF };\n\n// https://en.wikipedia.org/wiki/HSL_and_HSV#:~:text=8%2CH))%3D%2B1%7D-,HSV%20to%20RGB,-%5Bedit%5D\nconst HSVToRGB = (hue: number, saturation: number, value: number): RGBColor => {\n  if (\n    (hue < 0 || hue > 360) ||             // [0, 360]\n    (saturation < 0 || saturation > 1) || // [0, 1]\n    (value < 0 || value > 1)              // [0, 1]\n  ) {\n    throw 'Incorrect HSV values [HSVToRGB]'\n  }\n  const h = hue/60;\n\n  const c = value * saturation; // Chroma\n\n  // Intermediate value X for the second largest component of this color\n  const x = c * (1 - Math.abs(h % 2 - 1));\n\n  if (h >= 0 && h < 1) {\n    return { red: c * 255, green: x * 255, blue: 0 };\n  }\n  if (h >= 1 && h < 2) {\n    return { red: x * 255, green: c  * 255, blue: 0 };\n  }\n  if (h >= 2 && h < 3) {\n    return { red: 0, green: c  * 255, blue: x * 255 };\n  }\n  if (h >= 3 && h < 4) {\n    return { red: 0, green: x * 255, blue: c  * 255 };\n  }\n  if (h >= 4 && h < 5) {\n    return { red: x * 255, green: 0, blue: c  * 255 };\n  }\n  if (h >= 5 && h < 6) {\n    return { red: c  * 255, green: 0, blue: x * 255 };\n  }\n\n  return DEFAULT_COLOR;\n}\n\n/*\n  Create an \"n\" length array of rbg colors of increasing hue [0 - 360] \n  with max saturation and value (1 & 1)\n*/\nexport const getRainbowColors = (n: number): RGBColor[]  => {\n  const saturation = 1.0;\n  const value = 1.0;\n  const colors: RGBColor[] = [];\n\n  for (let index: number = 0; index < n; index++) {\n    const hue = (360 * index / n); // reduce to factor of 360\n    const rgb = HSVToRGB(hue, saturation, value);\n    colors.push(rgb); \n  }\n  return colors;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n"],"names":["BAR_COLOR","red","green","blue","x","y","width","height","color","this","collided","Bar","_width","_height","_count","values","Array","rainbowColors","getRainbowColors","i","j","p","count","getParticle","index","length","removeParticle","undefined","Blocks","xSpeed","ySpeed","DEFAULT_COLOR","invertXDirection","invertYDirection","X","Math","round","Y","speed","sqrt","radian","atan2","Particle","canvas","_canvas","_canvasCtx","getContext","clear","renderBar","bar","beginPath","fillStyle","fillRect","stroke","clearRect","_imgData","getImageData","_pixels","data","render","putImageData","setPixel","offsetLeft","container","blocksAreaHeight","_fps","_blocksAreaHeight","addEventListener","_mousemove","bind","_touchmove","_handleWin","alert","init","_handleLose","_drawMovingParticle","particle","particleSet","_update","_now","Date","now","_elapsed","_then","_fpsInterval","_blocks","forEach","block","_balls","ball","bSpeed","hitParticle","removedP","cos","PI","random","_fallBlocks","add","_bar","abs","fallP","newball","size","window","requestAnimationFrame","evt","touches","clientX","preventDefault","Set","barY","_initialBall","BlockBreaker","HSVToRGB","hue","saturation","value","h","c","n","colors","rgb","push","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","e","document","getElementById","innerWidth","innerHeight"],"sourceRoot":""}