(()=>{"use strict";var t,e={167:(t,e)=>{e.__esModule=!0;var i={red:255,green:0,blue:0},s=function(){function t(t,e,s,n){this.x=0,this.y=0,this.width=50,this.height=10,this.color=i,this.x=t,this.y=e,this.width=s,this.height=n}return t.prototype.hitTestPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t}();e.default=s},746:(t,e,i)=>{e.__esModule=!0;var s=i(509),n=i(409),a=function(){function t(t,e){this._width=t,this._height=e,this._count=t*e,this.values=new Array(t*e);for(var i=(0,n.getRainbowColors)(this._width),a=0;a<this._width;a++)for(var h=0;h<this._height;h++){var r=new s.default(a,h,i[a]);this.values[a+h*this._width]=r}}return t.prototype.count=function(){return this._count},t.prototype.width=function(){return this._width},t.prototype.height=function(){return this._height},t.prototype.getParticle=function(t,e){var i=t+e*this._width;if(!(i>=this.values.length||i<0))return this.values[t+e*this._width]},t.prototype.removeParticle=function(t,e){var i=this.values[t+e*this._width];return i&&(this._count--,this.values[t+e*this._width]=void 0),i},t}();e.default=a},509:(t,e,i)=>{e.__esModule=!0;var s=i(409),n=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),this.xSpeed=0,this.ySpeed=0,this.color=s.DEFAULT_COLOR,this.x=t,this.y=e,this.color=i}return t.prototype.invertXDirection=function(){this.xSpeed=-this.xSpeed},t.prototype.invertYDirection=function(){this.ySpeed=-this.ySpeed},t.prototype.X=function(){return Math.round(this.x)},t.prototype.Y=function(){return Math.round(this.y)},t.prototype.speed=function(){return Math.sqrt(this.xSpeed*this.xSpeed+this.xSpeed*this.xSpeed)},t.prototype.radian=function(){return Math.atan2(this.ySpeed,this.xSpeed)},t}();e.default=n},740:(t,e,i)=>{e.__esModule=!0,e.Particle=e.Blocks=e.Bar=void 0;var s=i(167);e.Bar=s.default;var n=i(746);e.Blocks=n.default;var a=i(509);e.Particle=a.default},763:(t,e)=>{e.__esModule=!0;var i=function(){function t(t){this._canvas=t,this._canvasCtx=this._canvas.getContext("2d"),this.width=this._canvas.width,this.height=this._canvas.height,this.clear()}return t.prototype.renderBar=function(t){this._canvasCtx.beginPath(),this._canvasCtx.fillStyle="rgb(".concat(t.color.red,",").concat(t.color.green,",").concat(t.color.blue,")"),this._canvasCtx.fillRect(t.x,t.y,t.width,t.height),this._canvasCtx.stroke()},t.prototype.clear=function(){this._canvasCtx.clearRect(0,0,this._canvas.width,this._canvas.height),this._imgData=this._canvasCtx.getImageData(0,0,this._canvas.width,this._canvas.height),this._pixels=this._imgData.data},t.prototype.render=function(){this._canvasCtx.putImageData(this._imgData,0,0)},t.prototype.setPixel=function(t,e,i){var s=e*(4*this._imgData.width)+4*t;this._pixels[s]=i.red,this._pixels[s+1]=i.green,this._pixels[s+2]=i.blue,this._pixels[s+3]=255},t.prototype.offsetLeft=function(){return this._canvas.offsetLeft},t}();e.default=i},989:(t,e,i)=>{e.__esModule=!0;var s=i(740),n=i(409),a=i(763),h=function(){function t(t,e){this._fps=30,this._canvas=new a.default(e),t.addEventListener("mousemove",this._mousemove.bind(this),!1),t.addEventListener("touchmove",this._touchmove.bind(this),!1)}return t.prototype._handleWin=function(){alert("Done!\n"),this.init()},t.prototype._handleLose=function(){alert("Try again"),this.init()},t.prototype._update=function(){var t=this;if(this._now=Date.now(),this._elapsed=this._now-this._then,this._canvas){if(this._elapsed>this._fpsInterval){this._then=this._now-this._elapsed%this._fpsInterval,this._canvas.clear(),this._blocks.values.forEach((function(e){e&&t._canvas.setPixel(e.x,e.y,e.color)}));var e=new Array;this._balls.forEach((function(i){for(var s=i.speed(),n=i.radian(),a=0;a<s;a++){i.x+=i.xSpeed/s,i.y+=i.ySpeed/s;var h=t._blocks.getParticle(i.X(),i.Y());if(h){var r=t._blocks.removeParticle(i.X(),i.Y());r&&(r.xSpeed=3*Math.cos(n+2*Math.PI/(30*Math.random())-15),r.ySpeed=1,r.color=h.color,t._fallBlocks.push(r)),i.invertYDirection()}(i.x<0&&i.xSpeed<0||i.x>t._canvas.width&&i.xSpeed>0)&&i.invertXDirection(),i.y<0&&i.ySpeed<0&&i.invertYDirection(),(i.y>t._canvas.height||i.y<0)&&e.push(i),t._bar.hitTestPoint(i.x,i.y)&&(i.ySpeed=-Math.abs(i.ySpeed)),t._canvas.setPixel(i.X(),i.Y(),i.color)}})),e.forEach((function(e){var i=t._balls.indexOf(e);-1!=i&&t._balls.splice(i,1)}));var i=new Array;this._fallBlocks.forEach((function(e){if(e.ySpeed+=.1,e.x+=e.xSpeed,e.x<0&&(e.x+=t._canvas.width),e.y+=e.ySpeed,t._canvas.setPixel(e.X(),e.Y(),e.color),t._bar.hitTestPoint(e.x,e.y)){var n=new s.Particle(e.x,e.y,e.color);n.xSpeed=10*Math.random(),n.ySpeed=9*Math.random()+1,t._balls.push(n),i.push(e)}else e.y>t._canvas.height&&i.push(e)})),i.forEach((function(e){var i=t._fallBlocks.indexOf(e);-1!=i&&t._fallBlocks.splice(i,1)})),this._canvas.render()}0==this._blocks.count()?this._handleWin():0==this._balls.length?this._handleLose():window.requestAnimationFrame(this._update.bind(this)),this._canvas.renderBar(this._bar)}},t.prototype._touchmove=function(t){this._bar.x=t.touches[0].clientX-this._canvas.offsetLeft()-this._bar.width/2,this._bar.x+this._bar.width>this._canvas.width&&(this._bar.x=this._canvas.width-this._bar.width),this._bar.x<0&&(this._bar.x=0),t.preventDefault()},t.prototype._mousemove=function(t){this._bar.x=t.clientX-this._canvas.offsetLeft()-this._bar.width/2,this._bar.x+this._bar.width>this._canvas.width&&(this._bar.x=this._canvas.width-this._bar.width),this._bar.x<0&&(this._bar.x=0)},t.prototype.init=function(){this._blocks=new s.Blocks(this._canvas.width,200),this._fallBlocks=new Array;var t=this._canvas.height-10-2;this._bar=new s.Bar(0,t,200,10);var e=new s.Particle(this._canvas.width/2,this._canvas.height/2,n.DEFAULT_COLOR);e.xSpeed=10*Math.random(),e.ySpeed=9*Math.random()-1,this._balls=new Array,this._balls.push(e),this._fpsInterval=1e3/this._fps,this._then=Date.now(),window.requestAnimationFrame(this._update.bind(this))},t}();e.default=h},409:(t,e)=>{e.__esModule=!0,e.getRainbowColors=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR={red:255,green:255,blue:255};var i=function(t,i,s){if(t<0||t>360||i<0||i>1||s<0||s>1)throw"Incorrect HSV values [HSVToRGB]";var n=t/60,a=s*i,h=a*(1-Math.abs(n%2-1));return n>=0&&n<1?{red:255*a,green:255*h,blue:0}:n>=1&&n<2?{red:255*h,green:255*a,blue:0}:n>=2&&n<3?{red:0,green:255*a,blue:255*h}:n>=3&&n<4?{red:0,green:255*h,blue:255*a}:n>=4&&n<5?{red:255*h,green:0,blue:255*a}:n>=5&&n<6?{red:255*a,green:0,blue:255*h}:e.DEFAULT_COLOR};e.getRainbowColors=function(t){for(var e=[],s=0;s<t;s++){var n=i(360*s/t,1,1);e.push(n)}return e}}},i={};t=function t(s){var n=i[s];if(void 0!==n)return n.exports;var a=i[s]={exports:{}};return e[s](a,a.exports,t),a.exports}(989),window.addEventListener("load",(function(e){var i=document.getElementById("canvas"),s=document.getElementById("container"),n=window.innerWidth>700?700:window.innerWidth,a=window.innerWidth>700?600:.85*window.innerHeight;i.width=n,i.height=a,new t.default(s,i).init()}))})();