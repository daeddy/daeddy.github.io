(()=>{"use strict";var t,e={167:(t,e)=>{e.__esModule=!0;var i={red:255,green:0,blue:0},s=function(){function t(t,e,s,a){this.x=0,this.y=0,this.width=50,this.height=10,this.color=i,this.x=t,this.y=e,this.width=s,this.height=a}return t.prototype.collided=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t}();e.default=s},746:(t,e,i)=>{e.__esModule=!0;var s=i(509),a=i(409),n=function(){function t(t,e){this._width=t,this._height=e,this._count=t*e,this.values=new Array(t*e);for(var i=(0,a.getRainbowColors)(this._width),n=0;n<this._width;n++)for(var h=0;h<this._height;h++){var r=new s.default(n,h,i[n]);this.values[n+h*this._width]=r}}return t.prototype.count=function(){return this._count},t.prototype.width=function(){return this._width},t.prototype.height=function(){return this._height},t.prototype.getParticle=function(t,e){var i=t+e*this._width;if(!(i>=this.values.length||i<0))return this.values[t+e*this._width]},t.prototype.removeParticle=function(t,e){var i=this.values[t+e*this._width];return i&&(this._count--,this.values[t+e*this._width]=void 0),i},t}();e.default=n},509:(t,e,i)=>{e.__esModule=!0;var s=i(409),a=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),this.xSpeed=0,this.ySpeed=0,this.color=s.DEFAULT_COLOR,this.x=t,this.y=e,this.color=i}return t.prototype.invertXDirection=function(){this.xSpeed=-this.xSpeed},t.prototype.invertYDirection=function(){this.ySpeed=-this.ySpeed},t.prototype.X=function(){return Math.round(this.x)},t.prototype.Y=function(){return Math.round(this.y)},t.prototype.speed=function(){return Math.sqrt(this.xSpeed*this.xSpeed+this.xSpeed*this.xSpeed)},t.prototype.radian=function(){return Math.atan2(this.ySpeed,this.xSpeed)},t}();e.default=a},740:(t,e,i)=>{e.__esModule=!0,e.Particle=e.Blocks=e.Bar=void 0;var s=i(167);e.Bar=s.default;var a=i(746);e.Blocks=a.default;var n=i(509);e.Particle=n.default},763:(t,e)=>{e.__esModule=!0;var i=function(){function t(t){this._canvas=t,this._canvasCtx=this._canvas.getContext("2d"),this.width=this._canvas.width,this.height=this._canvas.height,this.clear()}return t.prototype.renderBar=function(t){this._canvasCtx.beginPath(),this._canvasCtx.fillStyle="rgb(".concat(t.color.red,",").concat(t.color.green,",").concat(t.color.blue,")"),this._canvasCtx.fillRect(t.x,t.y,t.width,t.height),this._canvasCtx.stroke()},t.prototype.clear=function(){this._canvasCtx.clearRect(0,0,this._canvas.width,this._canvas.height),this._imgData=this._canvasCtx.getImageData(0,0,this._canvas.width,this._canvas.height),this._pixels=this._imgData.data},t.prototype.render=function(){this._canvasCtx.putImageData(this._imgData,0,0)},t.prototype.setPixel=function(t,e,i){var s=e*(4*this._imgData.width)+4*t;this._pixels[s]=i.red,this._pixels[s+1]=i.green,this._pixels[s+2]=i.blue,this._pixels[s+3]=255},t.prototype.offsetLeft=function(){return this._canvas.offsetLeft},t}();e.default=i},989:(t,e,i)=>{e.__esModule=!0;var s=i(740),a=i(409),n=i(763),h=function(){function t(t,e,i){this._fps=30,this._canvas=new n.default(e),this._blocksAreaHeight=i,t.addEventListener("mousemove",this._mousemove.bind(this),!1),t.addEventListener("touchmove",this._touchmove.bind(this),!1)}return t.prototype._handleWin=function(){alert("Done!\n"),this.init()},t.prototype._handleLose=function(){alert("Try again"),this.init()},t.prototype._drawMovingParticle=function(t,e){t.y>this._canvas.height||t.y<0?e.delete(t):t.x<0&&t.xSpeed<0||t.x>this._canvas.width&&t.xSpeed>0?t.invertXDirection():t.y<0&&t.ySpeed<0?t.invertYDirection():this._canvas.setPixel(t.X(),t.Y(),t.color)},t.prototype._update=function(){var t=this;this._now=Date.now(),this._elapsed=this._now-this._then,this._canvas&&(this._elapsed>this._fpsInterval&&(this._then=this._now-this._elapsed%this._fpsInterval,this._canvas.clear(),this._blocks.values.forEach((function(e){e&&t._canvas.setPixel(e.x,e.y,e.color)})),this._balls.forEach((function(e){for(var i=e.speed(),s=0;s<i;s++){e.x+=e.xSpeed/i,e.y+=e.ySpeed/i;var a=t._blocks.getParticle(e.X(),e.Y());if(a){var n=t._blocks.removeParticle(e.X(),e.Y());n&&(n.xSpeed=3*Math.cos(e.radian()+2*Math.PI/(30*Math.random())-15),n.ySpeed=1,n.color=a.color,t._fallBlocks.add(n)),e.invertYDirection()}t._bar.collided(e.x,e.y)&&(e.ySpeed=-Math.abs(e.ySpeed)),t._drawMovingParticle(e,t._balls)}})),this._fallBlocks.forEach((function(e){if(t._bar.collided(e.x,e.y)){var i=new s.Particle(e.x,t._canvas.height-t._bar.height+1,e.color);i.xSpeed=10*Math.random(),i.ySpeed=9*Math.random()+1,t._balls.add(i),t._fallBlocks.delete(e)}else e.ySpeed+=.1,e.x+=e.xSpeed,e.y+=e.ySpeed,t._drawMovingParticle(e,t._fallBlocks)})),this._canvas.render()),0==this._blocks.count()?this._handleWin():0==this._balls.size?this._handleLose():window.requestAnimationFrame(this._update.bind(this)),this._canvas.renderBar(this._bar))},t.prototype._touchmove=function(t){this._bar.x=t.touches[0].clientX-this._canvas.offsetLeft()-this._bar.width/2,this._bar.x+this._bar.width>this._canvas.width&&(this._bar.x=this._canvas.width-this._bar.width),this._bar.x<0&&(this._bar.x=0),t.preventDefault()},t.prototype._mousemove=function(t){this._bar.x=t.clientX-this._canvas.offsetLeft()-this._bar.width/2,this._bar.x+this._bar.width>this._canvas.width&&(this._bar.x=this._canvas.width-this._bar.width),this._bar.x<0&&(this._bar.x=0)},t.prototype.init=function(){this._blocks=new s.Blocks(this._canvas.width,this._blocksAreaHeight),this._fallBlocks=new Set;var t=this._canvas.height-10-2;this._bar=new s.Bar(0,t,200,10);var e=new s.Particle(this._canvas.width/2,this._canvas.height/2,a.DEFAULT_COLOR);e.xSpeed=10*Math.random(),e.ySpeed=9*Math.random()-1,this._balls=new Set,this._balls.add(e),this._fpsInterval=1e3/this._fps,this._then=Date.now(),window.requestAnimationFrame(this._update.bind(this))},t}();e.default=h},409:(t,e)=>{e.__esModule=!0,e.getRainbowColors=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR={red:255,green:255,blue:255};var i=function(t,i,s){if(t<0||t>360||i<0||i>1||s<0||s>1)throw"Incorrect HSV values [HSVToRGB]";var a=t/60,n=s*i,h=n*(1-Math.abs(a%2-1));return a>=0&&a<1?{red:255*n,green:255*h,blue:0}:a>=1&&a<2?{red:255*h,green:255*n,blue:0}:a>=2&&a<3?{red:0,green:255*n,blue:255*h}:a>=3&&a<4?{red:0,green:255*h,blue:255*n}:a>=4&&a<5?{red:255*h,green:0,blue:255*n}:a>=5&&a<6?{red:255*n,green:0,blue:255*h}:e.DEFAULT_COLOR};e.getRainbowColors=function(t){for(var e=[],s=0;s<t;s++){var a=i(360*s/t,1,1);e.push(a)}return e}}},i={};t=function t(s){var a=i[s];if(void 0!==a)return a.exports;var n=i[s]={exports:{}};return e[s](n,n.exports,t),n.exports}(989),window.addEventListener("load",(function(e){var i=document.getElementById("canvas"),s=document.getElementById("container"),a=window.innerWidth>700?700:window.innerWidth,n=window.innerWidth>700?600:.85*window.innerHeight;i.width=a,i.height=n,new t.default(s,i,100).init()}))})();